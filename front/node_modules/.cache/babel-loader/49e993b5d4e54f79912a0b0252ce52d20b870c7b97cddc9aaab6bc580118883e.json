{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref } from 'vue';\nimport { useRouter } from 'vue-router';\nexport default {\n  __name: 'LoginPage',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const email = ref('');\n    const password = ref('');\n    const error = ref('');\n    const router = useRouter();\n    const login = async () => {\n      try {\n        const response = await axios.post('/login', {\n          email: email.value,\n          password: password.value\n        });\n        localStorage.setItem('authToken', response.data.token);\n        localStorage.setItem('user', JSON.stringify(response.data.user));\n        console.log(response.data);\n        router.push('/admin').then(() => {\n          setTimeout(() => {\n            window.location.reload();\n          }, 300);\n        });\n      } catch (err) {\n        console.log(err);\n        error.value = err.response?.data?.message || 'Login failed';\n      }\n    };\n    const __returned__ = {\n      email,\n      password,\n      error,\n      router,\n      login,\n      ref,\n      get useRouter() {\n        return useRouter;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","useRouter","email","password","error","router","login","response","axios","post","value","localStorage","setItem","data","token","JSON","stringify","user","console","log","push","then","setTimeout","window","location","reload","err","message"],"sources":["/home/abd/www/zadaniya/infoservice/front/src/pages/LoginPage.vue"],"sourcesContent":["<template>\n  <Layout>\n    <div class=\"container mx-auto p-4\">\n      <h1 class=\"text-2xl font-bold mb-4\">Login</h1>\n      <form @submit.prevent=\"login\">\n        <div class=\"mb-4\">\n          <label for=\"email\" class=\"block text-sm font-medium text-gray-700\">Email</label>\n          <input v-model=\"email\" id=\"email\" type=\"email\" required class=\"mt-1 block w-full border-gray-300 rounded-md shadow-sm\"/>\n        </div>\n        <div class=\"mb-4\">\n          <label for=\"password\" class=\"block text-sm font-medium text-gray-700\">Password</label>\n          <input v-model=\"password\" id=\"password\" type=\"password\" required class=\"mt-1 block w-full border-gray-300 rounded-md shadow-sm\"/>\n        </div>\n        <button type=\"submit\" class=\"bg-blue-600 text-white px-4 py-2 rounded\">Login</button>\n        <div v-if=\"error\" class=\"mt-4 text-red-600\">{{ error }}</div>\n      </form>\n    </div>\n  </Layout>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\nimport { useRouter } from 'vue-router';\n\nconst email = ref('');\nconst password = ref('');\nconst error = ref('');\nconst router = useRouter();\n\nconst login = async () => {\n  try {\n    const response = await axios.post('/login', {\n      email: email.value,\n      password: password.value,\n    });\n    localStorage.setItem('authToken', response.data.token);\n    localStorage.setItem('user', JSON.stringify(response.data.user));\n    console.log(response.data);\n    \n    router.push('/admin').then(() => {\n      setTimeout(() => {\n        window.location.reload();\n      }, 300)\n    });\n\n  } catch (err) {\n    console.log(err);\n    error.value = err.response?.data?.message || 'Login failed';\n  }\n};\n</script>\n\n\n"],"mappings":";AAqBA,SAASA,GAAG,QAAQ,KAAK;AACzB,SAASC,SAAS,QAAQ,YAAY;;;;;;;IAEtC,MAAMC,KAAK,GAAGF,GAAG,CAAC,EAAE,CAAC;IACrB,MAAMG,QAAQ,GAAGH,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMI,KAAK,GAAGJ,GAAG,CAAC,EAAE,CAAC;IACrB,MAAMK,MAAM,GAAGJ,SAAS,CAAC,CAAC;IAE1B,MAAMK,KAAK,GAAG,MAAAA,CAAA,KAAY;MACxB,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACC,IAAI,CAAC,QAAQ,EAAE;UAC1CP,KAAK,EAAEA,KAAK,CAACQ,KAAK;UAClBP,QAAQ,EAAEA,QAAQ,CAACO;QACrB,CAAC,CAAC;QACFC,YAAY,CAACC,OAAO,CAAC,WAAW,EAAEL,QAAQ,CAACM,IAAI,CAACC,KAAK,CAAC;QACtDH,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEG,IAAI,CAACC,SAAS,CAACT,QAAQ,CAACM,IAAI,CAACI,IAAI,CAAC,CAAC;QAChEC,OAAO,CAACC,GAAG,CAACZ,QAAQ,CAACM,IAAI,CAAC;QAE1BR,MAAM,CAACe,IAAI,CAAC,QAAQ,CAAC,CAACC,IAAI,CAAC,MAAM;UAC/BC,UAAU,CAAC,MAAM;YACfC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC;UAC1B,CAAC,EAAE,GAAG,CAAC;QACT,CAAC,CAAC;MAEJ,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZR,OAAO,CAACC,GAAG,CAACO,GAAG,CAAC;QAChBtB,KAAK,CAACM,KAAK,GAAGgB,GAAG,CAACnB,QAAQ,EAAEM,IAAI,EAAEc,OAAO,IAAI,cAAc;MAC7D;IACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}