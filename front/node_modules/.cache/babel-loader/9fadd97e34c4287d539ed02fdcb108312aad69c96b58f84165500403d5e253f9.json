{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref } from 'vue';\nimport axios from '@/axios';\nimport { useRouter } from 'vue-router';\nexport default {\n  __name: 'AdminPage',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const user = JSON.parse(localStorage.getItem('user'));\n    const leads = ref(null);\n    const error = ref('');\n    const getLeads = async () => {\n      try {\n        const response = await axios.get('/leads');\n        leads.value = response.data;\n        console.log(response.data);\n      } catch (err) {\n        console.log(err);\n        error.value = err.response?.data?.message || 'Login failed';\n      }\n    };\n    const confirmResetPassword = () => {\n      if (window.confirm(\"Are you sure you want to reset your password?\")) {\n        rese();\n      }\n    };\n    const resetPassword = async () => {\n      try {\n        await axios.post('/api/forgot-password');\n        alert('Password reset link has been sent to your email.');\n      } catch (error) {\n        console.error('Logout failed:', error);\n      }\n    };\n    const confirmLogout = () => {\n      if (window.confirm(\"Are you sure you want to log out?\")) {\n        logout();\n      }\n    };\n    const logout = async () => {\n      try {\n        await axios.post('/api/logout');\n        localStorage.removeItem('token');\n        router.push('/login');\n      } catch (error) {\n        console.error('Logout failed:', error);\n      }\n    };\n    getLeads();\n    const __returned__ = {\n      router,\n      user,\n      leads,\n      error,\n      getLeads,\n      confirmResetPassword,\n      resetPassword,\n      confirmLogout,\n      logout,\n      ref,\n      get axios() {\n        return axios;\n      },\n      get useRouter() {\n        return useRouter;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","axios","useRouter","router","user","JSON","parse","localStorage","getItem","leads","error","getLeads","response","get","value","data","console","log","err","message","confirmResetPassword","window","confirm","rese","resetPassword","post","alert","confirmLogout","logout","removeItem","push"],"sources":["/home/abd/www/zadaniya/infoservice/front/src/pages/AdminPage.vue"],"sourcesContent":["<template>\n  <Layout>\n    <div class=\"container mx-auto p-4\">\n      <h1 class=\"text-2xl\">Welcome, <span class=\"font-bold\">{{user.name}}</span></h1>\n      <div>\n        <p>Your email: <span class=\"font-bold\">{{ user.email }}</span></p>\n        <button @click=\"confirmResetPassword\" class=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 \n        focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50\">Reset Password</button>\n        <button @click=\"confirmLogout\" class=\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 \n        focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50\">Logout</button>\n      </div>\n      <h2 class=\"text-xl font-bold mb-4 mt-4\">Leads:</h2>\n      <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\">\n        <div v-for=\"lead in leads\" :key=\"lead.id\" class=\"border p-4 rounded-lg shadow-md overflow-hidden break-words\">\n          <p><strong>First name:</strong> {{ lead.first_name }}</p>\n          <p><strong>Last name:</strong> {{ lead.last_name }}</p>\n          <p><strong>Email:</strong> {{ lead.email }}</p>\n          <p><strong>Phone number:</strong> {{ lead.phone }}</p>\n          <p><strong>Message:</strong> {{ lead.message }}</p>\n        </div>\n      </div>\n      <p class=\"text-red-500\">{{ error }}</p>\n\n\n    </div>\n  </Layout>\n</template>\n\n<script setup>\nimport {ref} from 'vue'\nimport axios from '@/axios'\nimport { useRouter } from 'vue-router';\n\nconst router = useRouter();\n\nconst user = JSON.parse(localStorage.getItem('user'));\n\nconst leads = ref(null)\nconst error = ref('')\n\n\nconst getLeads = async () => {\n  try {\n    const response = await axios.get('/leads');\n    leads.value=response.data\n    \n    console.log(response.data);\n\n  } catch (err) {\n    console.log(err);\n\n    error.value = err.response?.data?.message || 'Login failed';\n  }\n};\n\n\n\nconst confirmResetPassword = () => {\n  if (window.confirm(\"Are you sure you want to reset your password?\")) {\n    rese();\n  }\n};\n\nconst resetPassword = async () => {\n  try {\n    await axios.post('/api/forgot-password');\n    alert('Password reset link has been sent to your email.')\n  } catch (error) {\n    console.error('Logout failed:', error);\n  }\n};\n\nconst confirmLogout = () => {\n  if (window.confirm(\"Are you sure you want to log out?\")) {\n    logout();\n  }\n};\n\nconst logout = async () => {\n  try {\n    await axios.post('/api/logout');\n    localStorage.removeItem('token');\n    router.push('/login');\n  } catch (error) {\n    console.error('Logout failed:', error);\n  }\n};\n\ngetLeads()\n</script>\n"],"mappings":";AA6BA,SAAQA,GAAG,QAAO,KAAK;AACvB,OAAOC,KAAK,MAAM,SAAS;AAC3B,SAASC,SAAS,QAAQ,YAAY;;;;;;;IAEtC,MAAMC,MAAM,GAAGD,SAAS,CAAC,CAAC;IAE1B,MAAME,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;IAErD,MAAMC,KAAK,GAAGT,GAAG,CAAC,IAAI,CAAC;IACvB,MAAMU,KAAK,GAAGV,GAAG,CAAC,EAAE,CAAC;IAGrB,MAAMW,QAAQ,GAAG,MAAAA,CAAA,KAAY;MAC3B,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMX,KAAK,CAACY,GAAG,CAAC,QAAQ,CAAC;QAC1CJ,KAAK,CAACK,KAAK,GAACF,QAAQ,CAACG,IAAI;QAEzBC,OAAO,CAACC,GAAG,CAACL,QAAQ,CAACG,IAAI,CAAC;MAE5B,CAAC,CAAC,OAAOG,GAAG,EAAE;QACZF,OAAO,CAACC,GAAG,CAACC,GAAG,CAAC;QAEhBR,KAAK,CAACI,KAAK,GAAGI,GAAG,CAACN,QAAQ,EAAEG,IAAI,EAAEI,OAAO,IAAI,cAAc;MAC7D;IACF,CAAC;IAID,MAAMC,oBAAoB,GAAGA,CAAA,KAAM;MACjC,IAAIC,MAAM,CAACC,OAAO,CAAC,+CAA+C,CAAC,EAAE;QACnEC,IAAI,CAAC,CAAC;MACR;IACF,CAAC;IAED,MAAMC,aAAa,GAAG,MAAAA,CAAA,KAAY;MAChC,IAAI;QACF,MAAMvB,KAAK,CAACwB,IAAI,CAAC,sBAAsB,CAAC;QACxCC,KAAK,CAAC,kDAAkD,CAAC;MAC3D,CAAC,CAAC,OAAOhB,KAAK,EAAE;QACdM,OAAO,CAACN,KAAK,CAAC,gBAAgB,EAAEA,KAAK,CAAC;MACxC;IACF,CAAC;IAED,MAAMiB,aAAa,GAAGA,CAAA,KAAM;MAC1B,IAAIN,MAAM,CAACC,OAAO,CAAC,mCAAmC,CAAC,EAAE;QACvDM,MAAM,CAAC,CAAC;MACV;IACF,CAAC;IAED,MAAMA,MAAM,GAAG,MAAAA,CAAA,KAAY;MACzB,IAAI;QACF,MAAM3B,KAAK,CAACwB,IAAI,CAAC,aAAa,CAAC;QAC/BlB,YAAY,CAACsB,UAAU,CAAC,OAAO,CAAC;QAChC1B,MAAM,CAAC2B,IAAI,CAAC,QAAQ,CAAC;MACvB,CAAC,CAAC,OAAOpB,KAAK,EAAE;QACdM,OAAO,CAACN,KAAK,CAAC,gBAAgB,EAAEA,KAAK,CAAC;MACxC;IACF,CAAC;IAEDC,QAAQ,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}