{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container mx-auto p-4\"\n};\nconst _hoisted_2 = {\n  class: \"flex justify-center items-center\"\n};\nconst _hoisted_3 = {\n  class: \"flex flex-col gap-1\"\n};\nconst _hoisted_4 = {\n  class: \"text-2xl\"\n};\nconst _hoisted_5 = {\n  class: \"font-bold\"\n};\nconst _hoisted_6 = {\n  class: \"font-bold\"\n};\nconst _hoisted_7 = {\n  class: \"text-green-500\"\n};\nconst _hoisted_8 = {\n  key: 0\n};\nconst _hoisted_9 = {\n  class: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\"\n};\nconst _hoisted_10 = {\n  class: \"flex gap-2 mt-2\"\n};\nconst _hoisted_11 = [\"onClick\"];\nconst _hoisted_12 = {\n  class: \"text-red-500\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  const _component_Layout = _resolveComponent(\"Layout\");\n  return _openBlock(), _createBlock(_component_Layout, null, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"h1\", _hoisted_4, [_cache[0] || (_cache[0] = _createTextVNode(\"Welcome, \")), _createElementVNode(\"span\", _hoisted_5, _toDisplayString($setup.user.name), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[1] || (_cache[1] = _createTextVNode(\"Your email: \")), _createElementVNode(\"span\", _hoisted_6, _toDisplayString($setup.user.email), 1 /* TEXT */)]), !$setup.user.email_verified_at ? (_openBlock(), _createElementBlock(_Fragment, {\n      key: 0\n    }, [_cache[2] || (_cache[2] = _createElementVNode(\"p\", {\n      class: \"text-red-600\"\n    }, \"Your email is not verified.\", -1 /* HOISTED */)), _createElementVNode(\"button\", {\n      onClick: $setup.resendConfirmationEmail,\n      class: \"bg-yellow-600 text-white px-3 max-w-[300px] py-2 rounded hover:bg-yellow-700 mt-2 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-opacity-50\"\n    }, \"Resend Confirmation Email\"), _createElementVNode(\"p\", _hoisted_7, _toDisplayString($setup.success), 1 /* TEXT */)], 64 /* STABLE_FRAGMENT */)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", {\n      class: \"flex flex-col sm:flex-row gap-1 max-w-[300px]\"\n    }, [_createElementVNode(\"button\", {\n      onClick: $setup.confirmResetPassword,\n      class: \"bg-blue-600 text-white px-3 py-2 rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 w-full\"\n    }, \"Reset Password\"), _createElementVNode(\"button\", {\n      onClick: $setup.confirmLogout,\n      class: \"bg-red-600 text-white px-3 py-2 rounded hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 w-full\"\n    }, \"Logout\")])])]), _cache[10] || (_cache[10] = _createElementVNode(\"h2\", {\n      class: \"text-xl font-bold mb-4 mt-4\"\n    }, \"Leads:\", -1 /* HOISTED */)), $setup.user.email_verified_at && !$setup.leads.length ? (_openBlock(), _createElementBlock(\"p\", _hoisted_8, \"No leads in the database\")) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_9, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.leads, lead => {\n      return _openBlock(), _createElementBlock(\"div\", {\n        key: lead.id,\n        class: \"border p-4 rounded-lg shadow-md overflow-hidden break-words\"\n      }, [_createElementVNode(\"p\", null, [_cache[3] || (_cache[3] = _createElementVNode(\"strong\", null, \"First name:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString(lead.first_name), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[4] || (_cache[4] = _createElementVNode(\"strong\", null, \"Last name:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString(lead.last_name), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[5] || (_cache[5] = _createElementVNode(\"strong\", null, \"Email:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString(lead.email), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[6] || (_cache[6] = _createElementVNode(\"strong\", null, \"Phone number:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString(lead.phone), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[7] || (_cache[7] = _createElementVNode(\"strong\", null, \"Message:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString(lead.message), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_10, [_createVNode(_component_router_link, {\n        to: `/leads/edit/${lead.id}`,\n        class: \"bg-blue-600 text-white px-3 py-2 rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50\"\n      }, {\n        default: _withCtx(() => [...(_cache[8] || (_cache[8] = [_createTextVNode(\"Edit\")]))]),\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"to\"]), _createElementVNode(\"button\", {\n        onClick: $event => _ctx.confirmDelete(lead.id),\n        class: \"bg-red-600 text-white px-3 py-2 rounded hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50\"\n      }, \"Delete\", 8 /* PROPS */, _hoisted_11)]), _cache[9] || (_cache[9] = _createElementVNode(\"div\", {\n        class: \"mt-2\"\n      }, null, -1 /* HOISTED */))]);\n    }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"p\", _hoisted_12, _toDisplayString($setup.error), 1 /* TEXT */)])]),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["class","key","_createBlock","_component_Layout","default","_withCtx","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_createTextVNode","_hoisted_5","_toDisplayString","$setup","user","name","_hoisted_6","email","email_verified_at","_createElementBlock","_Fragment","onClick","resendConfirmationEmail","_hoisted_7","success","_createCommentVNode","confirmResetPassword","confirmLogout","leads","length","_hoisted_8","_hoisted_9","_renderList","lead","id","first_name","last_name","phone","message","_hoisted_10","_createVNode","_component_router_link","to","_cache","_","$event","_ctx","confirmDelete","_hoisted_11","_hoisted_12","error"],"sources":["/home/abd/www/zadaniya/infoservice/front/src/pages/AdminPage.vue"],"sourcesContent":["<template>\n  <Layout>\n    <div class=\"container mx-auto p-4\">\n      <div class=\"flex justify-center items-center\">  \n        <div class=\"flex flex-col gap-1\">\n          <h1 class=\"text-2xl\">Welcome, <span class=\"font-bold\">{{user.name}}</span></h1>\n          <p>Your email: <span class=\"font-bold\">{{ user.email }}</span></p>\n          <template v-if=\"!user.email_verified_at\">\n            <p class=\"text-red-600\">Your email is not verified.</p>\n            <button @click=\"resendConfirmationEmail\" class=\"bg-yellow-600 text-white px-3 max-w-[300px]\n            py-2 rounded hover:bg-yellow-700 mt-2 focus:outline-none focus:ring-2 focus:ring-yellow-500 \n            focus:ring-opacity-50\">Resend Confirmation Email</button>\n            <p class=\"text-green-500\">{{ success }}</p>\n          </template>\n          <div class=\"flex flex-col sm:flex-row gap-1 max-w-[300px]\">\n            <button @click=\"confirmResetPassword\" class=\"bg-blue-600 text-white px-3 py-2 rounded hover:bg-blue-700 \n            focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 w-full\">Reset Password</button>\n            <button @click=\"confirmLogout\" class=\"bg-red-600 text-white px-3 py-2 rounded hover:bg-red-700 \n            focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 w-full\">Logout</button>\n          </div>\n        </div>\n      </div>\n      <h2 class=\"text-xl font-bold mb-4 mt-4\">Leads:</h2>\n      <p v-if=\"user.email_verified_at && !leads.length\">No leads in the database</p>\n      <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\">\n        <div v-for=\"lead in leads\" :key=\"lead.id\" class=\"border p-4 rounded-lg shadow-md overflow-hidden break-words\">\n          <p><strong>First name:</strong> {{ lead.first_name }}</p>\n          <p><strong>Last name:</strong> {{ lead.last_name }}</p>\n          <p><strong>Email:</strong> {{ lead.email }}</p>\n          <p><strong>Phone number:</strong> {{ lead.phone }}</p>\n          <p><strong>Message:</strong> {{ lead.message }}</p>\n          <div class=\"flex gap-2 mt-2\">\n            <router-link :to=\"`/leads/edit/${lead.id}`\" class=\"bg-blue-600 text-white px-3 py-2 \n            rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500\n            focus:ring-opacity-50\">Edit</router-link>\n            <button @click=\"confirmDelete(lead.id)\" class=\"bg-red-600 text-white px-3 py-2 rounded hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50\">Delete</button>\n          </div>\n\n          <div class=\"mt-2\">\n          </div>\n        </div>\n      </div>\n      <p class=\"text-red-500\">{{ error }}</p>\n    </div>\n  </Layout>\n</template>\n\n<script setup>\nimport {ref} from 'vue'\nimport axios from '@/axios'\nimport { useRouter } from 'vue-router';\n\nconst router = useRouter();\n\nconst user = ref(JSON.parse(localStorage.getItem('user')));\n\nconst leads = ref([])\nconst error = ref('')\nconst success = ref('');\n\n\nconst getLeads = async () => {\n  try {\n    const response = await axios.get('/leads');\n    leads.value=response.data\n    \n    console.log(response.data);\n\n  } catch (err) {\n    console.log(err);\n\n    error.value = err.response?.data?.message || 'Login failed';\n  }\n};\n\nconst getUser = async () => {\n  try {\n    const response = await axios.get('/user');\n    user.value=response.data.user\n    localStorage.setItem('user', JSON.stringify(response.data.user));\n    console.log(response.data);\n  } catch (err) {\n    console.log(err);\n  }\n};\n\n\nconst confirmResetPassword = () => {\n  if (window.confirm(\"Are you sure you want to reset your password?\")) {\n    resetPassword();\n  }\n};\n\nconst resetPassword = async () => {\n  try {\n    await axios.post('/forgot-password');\n    alert('Password reset link has been sent to your email.')\n  } catch (error) {\n    console.error('Logout failed:', error);\n  }\n};\n\nconst confirmLogout = () => {\n  if (window.confirm(\"Are you sure you want to log out?\")) {\n    logout();\n  }\n};\n\nconst logout = async () => {\n  try {\n    await axios.post('/logout');\n    localStorage.removeItem('authToken');\n    localStorage.removeItem('user');\n    router.push('/').then(() => {\n      setTimeout(() => {\n        window.location.reload();\n      }, 300)\n    });\n  } catch (error) {\n    console.error('Logout failed:', error);\n    localStorage.removeItem('authToken');\n    localStorage.removeItem('user');\n    router.push('/').then(() => {\n      setTimeout(() => {\n        window.location.reload();\n      }, 300)\n    });\n  }\n};\n\nconst resendConfirmationEmail = async () => {\n  try {\n    const response = await axios.post('/email/resend');\n    console.log(response);\n    success.value = 'Confirmation email has been resent.';\n    alert('Confirmation email has been sent!');\n  } catch (err) {\n    error.value = err.response?.data?.message || 'Failed to resend confirmation email.';\n  }\n};\n\ngetUser()\ngetLeads()\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}