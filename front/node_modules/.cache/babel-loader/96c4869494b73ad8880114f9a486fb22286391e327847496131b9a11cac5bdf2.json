{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref } from 'vue';\nimport axios from '@/axios';\nimport { useRouter } from 'vue-router';\nexport default {\n  __name: 'AdminPage',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const user = JSON.parse(localStorage.getItem('user'));\n    const leads = ref(null);\n    const error = ref('');\n    const success = ref('');\n    const getLeads = async () => {\n      try {\n        const response = await axios.get('/leads');\n        leads.value = response.data;\n        console.log(response.data);\n      } catch (err) {\n        console.log(err);\n        error.value = err.response?.data?.message || 'Login failed';\n      }\n    };\n    const getUser = async () => {\n      try {\n        const response = await axios.get('/user');\n        user.value = response.data.user;\n        localStorage.setItem('user', JSON.stringify(response.data.user));\n        console.log(response.data);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n    const confirmResetPassword = () => {\n      if (window.confirm(\"Are you sure you want to reset your password?\")) {\n        resetPassword();\n      }\n    };\n    const resetPassword = async () => {\n      try {\n        await axios.post('/forgot-password');\n        alert('Password reset link has been sent to your email.');\n      } catch (error) {\n        console.error('Logout failed:', error);\n      }\n    };\n    const confirmLogout = () => {\n      if (window.confirm(\"Are you sure you want to log out?\")) {\n        logout();\n      }\n    };\n    const logout = async () => {\n      try {\n        await axios.post('/logout');\n        localStorage.removeItem('authToken');\n        localStorage.removeItem('user');\n        router.push('/').then(() => {\n          setTimeout(() => {\n            window.location.reload();\n          }, 300);\n        });\n      } catch (error) {\n        console.error('Logout failed:', error);\n        localStorage.removeItem('authToken');\n        localStorage.removeItem('user');\n        router.push('/').then(() => {\n          setTimeout(() => {\n            window.location.reload();\n          }, 300);\n        });\n      }\n    };\n    const resendConfirmationEmail = async () => {\n      try {\n        const response = await axios.post('/email/resend');\n        console.log(response);\n        success.value = 'Confirmation email has been resent.';\n        alert('Confirmation email has been sent!');\n      } catch (err) {\n        error.value = err.response?.data?.message || 'Failed to resend confirmation email.';\n      }\n    };\n    getUser();\n    getLeads();\n    const __returned__ = {\n      router,\n      user,\n      leads,\n      error,\n      success,\n      getLeads,\n      getUser,\n      confirmResetPassword,\n      resetPassword,\n      confirmLogout,\n      logout,\n      resendConfirmationEmail,\n      ref,\n      get axios() {\n        return axios;\n      },\n      get useRouter() {\n        return useRouter;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","axios","useRouter","router","user","JSON","parse","localStorage","getItem","leads","error","success","getLeads","response","get","value","data","console","log","err","message","getUser","setItem","stringify","confirmResetPassword","window","confirm","resetPassword","post","alert","confirmLogout","logout","removeItem","push","then","setTimeout","location","reload","resendConfirmationEmail"],"sources":["/home/abd/www/zadaniya/infoservice/front/src/pages/AdminPage.vue"],"sourcesContent":["<template>\n  <Layout>\n    <div class=\"container mx-auto p-4\">\n      <h1 class=\"text-2xl\">Welcome, <span class=\"font-bold\">{{user.name}}</span></h1>\n      <div class=\"flex flex-col gap-1\">\n        <p>Your email: <span class=\"font-bold\">{{ user.email }}</span></p>\n        <template v-if=\"!user.email_verified_at\">\n          <p class=\"text-red-600\">Your email is not verified.</p>\n          <button @click=\"resendConfirmationEmail\" class=\"bg-yellow-600 text-white px-3 max-w-[300px]\n          py-2 \n          rounded hover:bg-yellow-700 mt-2 focus:outline-none focus:ring-2 focus:ring-yellow-500 \n          focus:ring-opacity-50\">Resend Confirmation Email</button>\n          <p class=\"text-green-500\">{{ success }}</p>\n        </template>\n        <div class=\"flex flex-col sm:flex-row gap-1 max-w-[300px]\">\n          <button @click=\"confirmResetPassword\" class=\"bg-blue-600 text-white px-3 py-2 rounded hover:bg-blue-700 \n          focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50\">Reset Password</button>\n          <button @click=\"confirmLogout\" class=\"bg-red-600 text-white px-3 py-2 rounded hover:bg-red-700 \n          focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50\">Logout</button>\n        </div>\n      </div>\n      <h2 class=\"text-xl font-bold mb-4 mt-4\">Leads:</h2>\n      <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\">\n        <div v-for=\"lead in leads\" :key=\"lead.id\" class=\"border p-4 rounded-lg shadow-md overflow-hidden break-words\">\n          <p><strong>First name:</strong> {{ lead.first_name }}</p>\n          <p><strong>Last name:</strong> {{ lead.last_name }}</p>\n          <p><strong>Email:</strong> {{ lead.email }}</p>\n          <p><strong>Phone number:</strong> {{ lead.phone }}</p>\n          <p><strong>Message:</strong> {{ lead.message }}</p>\n        </div>\n      </div>\n      <p class=\"text-red-500\">{{ error }}</p>\n    </div>\n  </Layout>\n</template>\n\n<script setup>\nimport {ref} from 'vue'\nimport axios from '@/axios'\nimport { useRouter } from 'vue-router';\n\nconst router = useRouter();\n\nconst user = JSON.parse(localStorage.getItem('user'));\n\nconst leads = ref(null)\nconst error = ref('')\nconst success = ref('');\n\n\nconst getLeads = async () => {\n  try {\n    const response = await axios.get('/leads');\n    leads.value=response.data\n    \n    console.log(response.data);\n\n  } catch (err) {\n    console.log(err);\n\n    error.value = err.response?.data?.message || 'Login failed';\n  }\n};\n\nconst getUser = async () => {\n  try {\n    const response = await axios.get('/user');\n    user.value=response.data.user\n    localStorage.setItem('user', JSON.stringify(response.data.user));\n    console.log(response.data);\n  } catch (err) {\n    console.log(err);\n  }\n};\n\n\nconst confirmResetPassword = () => {\n  if (window.confirm(\"Are you sure you want to reset your password?\")) {\n    resetPassword();\n  }\n};\n\nconst resetPassword = async () => {\n  try {\n    await axios.post('/forgot-password');\n    alert('Password reset link has been sent to your email.')\n  } catch (error) {\n    console.error('Logout failed:', error);\n  }\n};\n\nconst confirmLogout = () => {\n  if (window.confirm(\"Are you sure you want to log out?\")) {\n    logout();\n  }\n};\n\nconst logout = async () => {\n  try {\n    await axios.post('/logout');\n    localStorage.removeItem('authToken');\n    localStorage.removeItem('user');\n    router.push('/').then(() => {\n      setTimeout(() => {\n        window.location.reload();\n      }, 300)\n    });\n  } catch (error) {\n    console.error('Logout failed:', error);\n    localStorage.removeItem('authToken');\n    localStorage.removeItem('user');\n    router.push('/').then(() => {\n      setTimeout(() => {\n        window.location.reload();\n      }, 300)\n    });\n  }\n};\n\nconst resendConfirmationEmail = async () => {\n  try {\n    const response = await axios.post('/email/resend');\n    console.log(response);\n    success.value = 'Confirmation email has been resent.';\n    alert('Confirmation email has been sent!');\n  } catch (err) {\n    error.value = err.response?.data?.message || 'Failed to resend confirmation email.';\n  }\n};\n\ngetUser()\ngetLeads()\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}