{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers, resolveComponent as _resolveComponent, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container mx-auto p-4\"\n};\nconst _hoisted_2 = {\n  class: \"mb-4\"\n};\nconst _hoisted_3 = {\n  class: \"mb-4\"\n};\nconst _hoisted_4 = {\n  key: 0,\n  class: \"mt-4 text-red-600\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Layout = _resolveComponent(\"Layout\");\n  return _openBlock(), _createBlock(_component_Layout, null, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_1, [_cache[5] || (_cache[5] = _createElementVNode(\"h1\", {\n      class: \"text-2xl font-bold mb-4\"\n    }, \"Login\", -1 /* HOISTED */)), _createElementVNode(\"form\", {\n      onSubmit: _withModifiers($setup.login, [\"prevent\"])\n    }, [_createElementVNode(\"div\", _hoisted_2, [_cache[2] || (_cache[2] = _createElementVNode(\"label\", {\n      for: \"email\",\n      class: \"block text-sm font-medium text-gray-700\"\n    }, \"Email\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.email = $event),\n      id: \"email\",\n      type: \"email\",\n      required: \"\",\n      class: \"mt-1 block w-full border-gray-300 rounded-md shadow-sm\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.email]])]), _createElementVNode(\"div\", _hoisted_3, [_cache[3] || (_cache[3] = _createElementVNode(\"label\", {\n      for: \"password\",\n      class: \"block text-sm font-medium text-gray-700\"\n    }, \"Password\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.password = $event),\n      id: \"password\",\n      type: \"password\",\n      required: \"\",\n      class: \"mt-1 block w-full border-gray-300 rounded-md shadow-sm\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.password]])]), _cache[4] || (_cache[4] = _createElementVNode(\"button\", {\n      type: \"submit\",\n      class: \"bg-blue-600 text-white px-4 py-2 rounded\"\n    }, \"Login\", -1 /* HOISTED */)), $setup.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, _toDisplayString($setup.error), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)], 32 /* NEED_HYDRATION */)])]),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["class","key","_createBlock","_component_Layout","default","_withCtx","_createElementVNode","_hoisted_1","onSubmit","_withModifiers","$setup","login","_hoisted_2","for","_cache","$event","email","id","type","required","_hoisted_3","password","error","_createElementBlock","_hoisted_4","_toDisplayString","_createCommentVNode","_"],"sources":["/home/abd/www/zadaniya/infoservice/front/src/pages/LoginPage.vue"],"sourcesContent":["<template>\n  <Layout>\n    <div class=\"container mx-auto p-4\">\n      <h1 class=\"text-2xl font-bold mb-4\">Login</h1>\n      <form @submit.prevent=\"login\">\n        <div class=\"mb-4\">\n          <label for=\"email\" class=\"block text-sm font-medium text-gray-700\">Email</label>\n          <input v-model=\"email\" id=\"email\" type=\"email\" required class=\"mt-1 block w-full border-gray-300 rounded-md shadow-sm\"/>\n        </div>\n        <div class=\"mb-4\">\n          <label for=\"password\" class=\"block text-sm font-medium text-gray-700\">Password</label>\n          <input v-model=\"password\" id=\"password\" type=\"password\" required class=\"mt-1 block w-full border-gray-300 rounded-md shadow-sm\"/>\n        </div>\n        <button type=\"submit\" class=\"bg-blue-600 text-white px-4 py-2 rounded\">Login</button>\n        <div v-if=\"error\" class=\"mt-4 text-red-600\">{{ error }}</div>\n      </form>\n    </div>\n  </Layout>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\nimport axios from '@/axios';\nimport { useRouter } from 'vue-router';\n\nconst email = ref('');\nconst password = ref('');\nconst error = ref('');\nconst router = useRouter();\n\nconst login = async () => {\n  try {\n    const response = await axios.post('/login', {\n      email: email.value,\n      password: password.value,\n    });\n    localStorage.setItem('authToken', response.data.token);\n    localStorage.setItem('userInfo', response.data.user);\n    console.log(response.data);\n    \n    router.push('/profile').then(() => {\n    setTimeout(() => {\n        window.location.reload();\n      }, 1000)\n    })\n\n  } catch (err) {\n    console.log(err);\n    error.value = err.response?.data?.message || 'Login failed';\n  }\n};\n</script>\n\n\n"],"mappings":";;EAESA,KAAK,EAAC;AAAuB;;EAGzBA,KAAK,EAAC;AAAM;;EAIZA,KAAK,EAAC;AAAM;;EATzBC,GAAA;EAc0BD,KAAK,EAAC;;;;uBAb9BE,YAAA,CAgBSC,iBAAA;IAjBXC,OAAA,EAAAC,QAAA,CAEI,MAcM,CAdNC,mBAAA,CAcM,OAdNC,UAcM,G,0BAbJD,mBAAA,CAA8C;MAA1CN,KAAK,EAAC;IAAyB,GAAC,OAAK,sBACzCM,mBAAA,CAWO;MAXAE,QAAM,EAJnBC,cAAA,CAI6BC,MAAA,CAAAC,KAAK;QAC1BL,mBAAA,CAGM,OAHNM,UAGM,G,0BAFJN,mBAAA,CAAgF;MAAzEO,GAAG,EAAC,OAAO;MAACb,KAAK,EAAC;OAA0C,OAAK,sB,gBACxEM,mBAAA,CAAwH;MAPlI,uBAAAQ,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAO0BL,MAAA,CAAAM,KAAK,GAAAD,MAAA;MAAEE,EAAE,EAAC,OAAO;MAACC,IAAI,EAAC,OAAO;MAACC,QAAQ,EAAR,EAAQ;MAACnB,KAAK,EAAC;mDAA9CU,MAAA,CAAAM,KAAK,E,KAEvBV,mBAAA,CAGM,OAHNc,UAGM,G,0BAFJd,mBAAA,CAAsF;MAA/EO,GAAG,EAAC,UAAU;MAACb,KAAK,EAAC;OAA0C,UAAQ,sB,gBAC9EM,mBAAA,CAAiI;MAX3I,uBAAAQ,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAW0BL,MAAA,CAAAW,QAAQ,GAAAN,MAAA;MAAEE,EAAE,EAAC,UAAU;MAACC,IAAI,EAAC,UAAU;MAACC,QAAQ,EAAR,EAAQ;MAACnB,KAAK,EAAC;mDAAvDU,MAAA,CAAAW,QAAQ,E,+BAE1Bf,mBAAA,CAAqF;MAA7EY,IAAI,EAAC,QAAQ;MAAClB,KAAK,EAAC;OAA2C,OAAK,sBACjEU,MAAA,CAAAY,KAAK,I,cAAhBC,mBAAA,CAA6D,OAA7DC,UAA6D,EAAAC,gBAAA,CAAdf,MAAA,CAAAY,KAAK,oBAd5DI,mBAAA,e;IAAAC,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}