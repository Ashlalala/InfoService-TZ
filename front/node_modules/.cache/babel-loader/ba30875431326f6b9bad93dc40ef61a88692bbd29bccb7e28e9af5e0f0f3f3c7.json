{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref } from 'vue';\nimport axios from '@/axios';\nimport { useRouter } from 'vue-router';\nexport default {\n  __name: 'AdminPage',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const user = JSON.parse(localStorage.getItem('user'));\n    console.log(user);\n    const leads = ref(null);\n    const error = ref('');\n    const getLeads = async () => {\n      try {\n        const response = await axios.get('/leads');\n        leads.value = response.data;\n        console.log(response.data);\n      } catch (err) {\n        console.log(err);\n        error.value = err.response?.data?.message || 'Login failed';\n      }\n    };\n    const confirmLogout = () => {\n      if (window.confirm(\"Are you sure you want to log out?\")) {\n        logout();\n      }\n    };\n    const logout = async () => {\n      try {\n        await axios.post('/api/logout');\n        localStorage.removeItem('token');\n        router.push('/login');\n      } catch (error) {\n        console.error('Logout failed:', error);\n      }\n    };\n    getLeads();\n    const __returned__ = {\n      router,\n      user,\n      leads,\n      error,\n      getLeads,\n      confirmLogout,\n      logout,\n      ref,\n      get axios() {\n        return axios;\n      },\n      get useRouter() {\n        return useRouter;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","axios","useRouter","router","user","JSON","parse","localStorage","getItem","console","log","leads","error","getLeads","response","get","value","data","err","message","confirmLogout","window","confirm","logout","post","removeItem","push"],"sources":["/home/abd/www/zadaniya/infoservice/front/src/pages/AdminPage.vue"],"sourcesContent":["<template>\n  <Layout>\n    <div class=\"container mx-auto p-4\">\n      <h1 class=\"text-2xl\">Welcome, <span class=\"font-bold\">{{user.name}}</span></h1>\n      <div>\n        <p>Your email: <span class=\"font-bold\">{{ user.email }}</span></p>\n        <button class=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 \n        focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50\">Reset Password</button>\n        <button class=\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 \n        focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50\">Logout</button>\n      </div>\n      <h2 class=\"text-xl font-bold mb-4 mt-4\">Leads:</h2>\n      <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\">\n        <div v-for=\"lead in leads\" :key=\"lead.id\" class=\"border p-4 rounded-lg shadow-md overflow-hidden break-words\">\n          <p><strong>First name:</strong> {{ lead.first_name }}</p>\n          <p><strong>Last name:</strong> {{ lead.last_name }}</p>\n          <p><strong>Email:</strong> {{ lead.email }}</p>\n          <p><strong>Phone number:</strong> {{ lead.phone }}</p>\n          <p><strong>Message:</strong> {{ lead.message }}</p>\n        </div>\n      </div>\n      <p class=\"text-red-500\">{{ error }}</p>\n\n\n    </div>\n  </Layout>\n</template>\n\n<script setup>\nimport {ref} from 'vue'\nimport axios from '@/axios'\nimport { useRouter } from 'vue-router';\nconst router = useRouter();\nconst user = JSON.parse(localStorage.getItem('user'));\nconsole.log(user);\n\nconst leads = ref(null)\nconst error = ref('')\n\n\nconst getLeads = async () => {\n  try {\n    const response = await axios.get('/leads');\n    leads.value=response.data\n    \n    console.log(response.data);\n\n  } catch (err) {\n    console.log(err);\n\n    error.value = err.response?.data?.message || 'Login failed';\n  }\n};\n\n\n\nconst confirmLogout = () => {\n  if (window.confirm(\"Are you sure you want to log out?\")) {\n    logout();\n  }\n};\n\nconst logout = async () => {\n  try {\n    await axios.post('/api/logout');\n    localStorage.removeItem('token');\n    router.push('/login');\n  } catch (error) {\n    console.error('Logout failed:', error);\n  }\n};\n\ngetLeads()\n</script>\n"],"mappings":";AA6BA,SAAQA,GAAG,QAAO,KAAK;AACvB,OAAOC,KAAK,MAAM,SAAS;AAC3B,SAASC,SAAS,QAAQ,YAAY;;;;;;;IACtC,MAAMC,MAAM,GAAGD,SAAS,CAAC,CAAC;IAC1B,MAAME,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;IACrDC,OAAO,CAACC,GAAG,CAACN,IAAI,CAAC;IAEjB,MAAMO,KAAK,GAAGX,GAAG,CAAC,IAAI,CAAC;IACvB,MAAMY,KAAK,GAAGZ,GAAG,CAAC,EAAE,CAAC;IAGrB,MAAMa,QAAQ,GAAG,MAAAA,CAAA,KAAY;MAC3B,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMb,KAAK,CAACc,GAAG,CAAC,QAAQ,CAAC;QAC1CJ,KAAK,CAACK,KAAK,GAACF,QAAQ,CAACG,IAAI;QAEzBR,OAAO,CAACC,GAAG,CAACI,QAAQ,CAACG,IAAI,CAAC;MAE5B,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZT,OAAO,CAACC,GAAG,CAACQ,GAAG,CAAC;QAEhBN,KAAK,CAACI,KAAK,GAAGE,GAAG,CAACJ,QAAQ,EAAEG,IAAI,EAAEE,OAAO,IAAI,cAAc;MAC7D;IACF,CAAC;IAID,MAAMC,aAAa,GAAGA,CAAA,KAAM;MAC1B,IAAIC,MAAM,CAACC,OAAO,CAAC,mCAAmC,CAAC,EAAE;QACvDC,MAAM,CAAC,CAAC;MACV;IACF,CAAC;IAED,MAAMA,MAAM,GAAG,MAAAA,CAAA,KAAY;MACzB,IAAI;QACF,MAAMtB,KAAK,CAACuB,IAAI,CAAC,aAAa,CAAC;QAC/BjB,YAAY,CAACkB,UAAU,CAAC,OAAO,CAAC;QAChCtB,MAAM,CAACuB,IAAI,CAAC,QAAQ,CAAC;MACvB,CAAC,CAAC,OAAOd,KAAK,EAAE;QACdH,OAAO,CAACG,KAAK,CAAC,gBAAgB,EAAEA,KAAK,CAAC;MACxC;IACF,CAAC;IAEDC,QAAQ,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}